import{f as V,r as k,i as h,h as ne,l as q,O as T,F as x,j as Q,k as ae,m as U,s as fe,v as me,Q as be,x as Pe,y as G,o as _,B as ge,w as A,b as K,C as ee,a as ye,c as Se,A as oe,R as he,T as $e,G as te,K as we}from"./entry.66808c07.js";import{u as Ee}from"./usePopper.27b27bd8.js";import{_ as ke}from"./_plugin-vue_export-helper.c27b6911.js";import{o as n,u as D,H as Y,t as N,N as le,a as F}from"./dom.fe5c7340.js";import{m as Z,E as J,w as Oe,h as Be,P as I,N as B,T as R}from"./focus-management.72b6de4c.js";import{c as Me,l as L,p as Te}from"./open-closed.5468058a.js";import{b as Ce}from"./use-resolve-button-type.f3369464.js";import{y as Fe}from"./use-outside-click.cbd3df0e.js";import{V as Ie,p as De,E as Ne,n as re,d as M}from"./use-root-containers.e991fa72.js";import{f as z,a as W}from"./hidden.7bbe89e6.js";import{o as He}from"./omit.2383c4bc.js";import"./index.7b010e4a.js";import"./index.c111b088.js";import"./_baseIteratee.e4fcdbf8.js";import"./_Uint8Array.6f9c1fd4.js";import"./_baseIsEqual.edd4b790.js";import"./get.55859130.js";var je=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(je||{});let ue=Symbol("PopoverContext");function X(e){let y=U(ue,null);if(y===null){let S=new Error(`<${e} /> is missing a parent <${pe.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(S,X),S}return y}let Ae=Symbol("PopoverGroupContext");function se(){return U(Ae,null)}let ie=Symbol("PopoverPanelContext");function Le(){return U(ie,null)}let pe=V({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:y,attrs:S,expose:E}){var t;let o=k(null);E({el:o,$el:o});let m=k(1),c=k(null),P=k(null),d=k(null),u=k(null),$=h(()=>Z(o)),O=h(()=>{var l,r;if(!n(c)||!n(u))return!1;for(let j of document.querySelectorAll("body > *"))if(Number(j==null?void 0:j.contains(n(c)))^Number(j==null?void 0:j.contains(n(u))))return!0;let v=J(),w=v.indexOf(n(c)),H=(w+v.length-1)%v.length,ve=(w+1)%v.length,ce=v[H],de=v[ve];return!((l=n(u))!=null&&l.contains(ce))&&!((r=n(u))!=null&&r.contains(de))}),b={popoverState:m,buttonId:k(null),panelId:k(null),panel:u,button:c,isPortalled:O,beforePanelSentinel:P,afterPanelSentinel:d,togglePopover(){m.value=D(m.value,{0:1,1:0})},closePopover(){m.value!==1&&(m.value=1)},close(l){b.closePopover();let r=(()=>l?l instanceof HTMLElement?l:l.value instanceof HTMLElement?n(l):n(b.button):n(b.button))();r==null||r.focus()}};ne(ue,b),Me(h(()=>D(m.value,{0:L.Open,1:L.Closed})));let C={buttonId:b.buttonId,panelId:b.panelId,close(){b.closePopover()}},g=se(),s=g==null?void 0:g.registerPopover,[i,p]=Ie(),a=De({mainTreeNodeRef:g==null?void 0:g.mainTreeNodeRef,portals:i,defaultContainers:[c,u]});function f(){var l,r,v,w;return(w=g==null?void 0:g.isFocusWithinPopoverGroup())!=null?w:((l=$.value)==null?void 0:l.activeElement)&&(((r=n(c))==null?void 0:r.contains($.value.activeElement))||((v=n(u))==null?void 0:v.contains($.value.activeElement)))}return q(()=>s==null?void 0:s(C)),Ne((t=$.value)==null?void 0:t.defaultView,"focus",l=>{var r,v;l.target!==window&&l.target instanceof HTMLElement&&m.value===0&&(f()||c&&u&&(a.contains(l.target)||(r=n(b.beforePanelSentinel))!=null&&r.contains(l.target)||(v=n(b.afterPanelSentinel))!=null&&v.contains(l.target)||b.closePopover()))},!0),Fe(a.resolveContainers,(l,r)=>{var v;b.closePopover(),Oe(r,Be.Loose)||(l.preventDefault(),(v=n(c))==null||v.focus())},h(()=>m.value===0)),()=>{let l={open:m.value===0,close:b.close};return T(x,[T(p,{},()=>Y({theirProps:{...e,...S},ourProps:{ref:o},slot:l,slots:y,attrs:S,name:"Popover"})),T(a.MainTreeNode)])}}}),Ve=V({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${N()}`}},inheritAttrs:!1,setup(e,{attrs:y,slots:S,expose:E}){let t=X("PopoverButton"),o=h(()=>Z(t.button));E({el:t.button,$el:t.button}),Q(()=>{t.buttonId.value=e.id}),ae(()=>{t.buttonId.value=null});let m=se(),c=m==null?void 0:m.closeOthers,P=Le(),d=h(()=>P===null?!1:P.value===t.panelId.value),u=k(null),$=`headlessui-focus-sentinel-${N()}`;d.value||q(()=>{t.button.value=u.value});let O=Ce(h(()=>({as:e.as,type:y.type})),u);function b(a){var f,l,r,v,w;if(d.value){if(t.popoverState.value===1)return;switch(a.key){case F.Space:case F.Enter:a.preventDefault(),(l=(f=a.target).click)==null||l.call(f),t.closePopover(),(r=n(t.button))==null||r.focus();break}}else switch(a.key){case F.Space:case F.Enter:a.preventDefault(),a.stopPropagation(),t.popoverState.value===1&&(c==null||c(t.buttonId.value)),t.togglePopover();break;case F.Escape:if(t.popoverState.value!==0)return c==null?void 0:c(t.buttonId.value);if(!n(t.button)||(v=o.value)!=null&&v.activeElement&&!((w=n(t.button))!=null&&w.contains(o.value.activeElement)))return;a.preventDefault(),a.stopPropagation(),t.closePopover();break}}function C(a){d.value||a.key===F.Space&&a.preventDefault()}function g(a){var f,l;e.disabled||(d.value?(t.closePopover(),(f=n(t.button))==null||f.focus()):(a.preventDefault(),a.stopPropagation(),t.popoverState.value===1&&(c==null||c(t.buttonId.value)),t.togglePopover(),(l=n(t.button))==null||l.focus()))}function s(a){a.preventDefault(),a.stopPropagation()}let i=re();function p(){let a=n(t.panel);if(!a)return;function f(){D(i.value,{[M.Forwards]:()=>I(a,B.First),[M.Backwards]:()=>I(a,B.Last)})===R.Error&&I(J().filter(l=>l.dataset.headlessuiFocusGuard!=="true"),D(i.value,{[M.Forwards]:B.Next,[M.Backwards]:B.Previous}),{relativeTo:n(t.button)})}f()}return()=>{let a=t.popoverState.value===0,f={open:a},{id:l,...r}=e,v=d.value?{ref:u,type:O.value,onKeydown:b,onClick:g}:{ref:u,id:l,type:O.value,"aria-expanded":t.popoverState.value===0,"aria-controls":n(t.panel)?t.panelId.value:void 0,disabled:e.disabled?!0:void 0,onKeydown:b,onKeyup:C,onClick:g,onMousedown:s};return T(x,[Y({ourProps:v,theirProps:{...y,...r},slot:f,attrs:y,slots:S,name:"PopoverButton"}),a&&!d.value&&t.isPortalled.value&&T(z,{id:$,features:W.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:p})])}}}),Ge=V({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${N()}`}},inheritAttrs:!1,setup(e,{attrs:y,slots:S,expose:E}){let{focus:t}=e,o=X("PopoverPanel"),m=h(()=>Z(o.panel)),c=`headlessui-focus-sentinel-before-${N()}`,P=`headlessui-focus-sentinel-after-${N()}`;E({el:o.panel,$el:o.panel}),Q(()=>{o.panelId.value=e.id}),ae(()=>{o.panelId.value=null}),ne(ie,o.panelId),q(()=>{var s,i;if(!t||o.popoverState.value!==0||!o.panel)return;let p=(s=m.value)==null?void 0:s.activeElement;(i=n(o.panel))!=null&&i.contains(p)||I(n(o.panel),B.First)});let d=Te(),u=h(()=>d!==null?(d.value&L.Open)===L.Open:o.popoverState.value===0);function $(s){var i,p;switch(s.key){case F.Escape:if(o.popoverState.value!==0||!n(o.panel)||m.value&&!((i=n(o.panel))!=null&&i.contains(m.value.activeElement)))return;s.preventDefault(),s.stopPropagation(),o.closePopover(),(p=n(o.button))==null||p.focus();break}}function O(s){var i,p,a,f,l;let r=s.relatedTarget;r&&n(o.panel)&&((i=n(o.panel))!=null&&i.contains(r)||(o.closePopover(),((a=(p=n(o.beforePanelSentinel))==null?void 0:p.contains)!=null&&a.call(p,r)||(l=(f=n(o.afterPanelSentinel))==null?void 0:f.contains)!=null&&l.call(f,r))&&r.focus({preventScroll:!0})))}let b=re();function C(){let s=n(o.panel);if(!s)return;function i(){D(b.value,{[M.Forwards]:()=>{var p;I(s,B.First)===R.Error&&((p=n(o.afterPanelSentinel))==null||p.focus())},[M.Backwards]:()=>{var p;(p=n(o.button))==null||p.focus({preventScroll:!0})}})}i()}function g(){let s=n(o.panel);if(!s)return;function i(){D(b.value,{[M.Forwards]:()=>{let p=n(o.button),a=n(o.panel);if(!p)return;let f=J(),l=f.indexOf(p),r=f.slice(0,l+1),v=[...f.slice(l+1),...r];for(let w of v.slice())if(w.dataset.headlessuiFocusGuard==="true"||a!=null&&a.contains(w)){let H=v.indexOf(w);H!==-1&&v.splice(H,1)}I(v,B.First,{sorted:!1})},[M.Backwards]:()=>{var p;I(s,B.Previous)===R.Error&&((p=n(o.button))==null||p.focus())}})}i()}return()=>{let s={open:o.popoverState.value===0,close:o.close},{id:i,focus:p,...a}=e,f={ref:o.panel,id:i,onKeydown:$,onFocusout:t&&o.popoverState.value===0?O:void 0,tabIndex:-1};return Y({ourProps:f,theirProps:{...y,...a},attrs:y,slot:s,slots:{...S,default:(...l)=>{var r;return[T(x,[u.value&&o.isPortalled.value&&T(z,{id:c,ref:o.beforePanelSentinel,features:W.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:C}),(r=S.default)==null?void 0:r.call(S,...l),u.value&&o.isPortalled.value&&T(z,{id:P,ref:o.afterPanelSentinel,features:W.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:g})])]}},features:le.RenderStrategy|le.Static,visible:u.value,name:"PopoverPanel"})}}});const Ke=V({components:{HPopover:pe,HPopoverButton:Ve,HPopoverPanel:Ge},inheritAttrs:!1,props:{mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},disabled:{type:Boolean,default:!1},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},popper:{type:Object,default:()=>({})},ui:{type:Object,default:()=>({})}},setup(e,{attrs:y}){const S=fe(),E=h(()=>me({},e.ui,S.ui.popover)),t=h(()=>be(e.mode==="hover"?{offsetDistance:0}:{},e.popper,E.value.popper)),[o,m]=Ee(t.value),c=k(null),P=k(null);let d=null,u=null;Q(()=>{var i;const g=(i=c.value)==null?void 0:i.$.provides;if(!g)return;const s=Object.getOwnPropertySymbols(g);P.value=s.length&&g[s[0]]});const $=h(()=>{var s,i;const g=((s=e.popper)==null?void 0:s.offsetDistance)||((i=E.value.popper)==null?void 0:i.offsetDistance)||8;return e.mode==="hover"?{paddingTop:`${g}px`,paddingBottom:`${g}px`}:{}}),O=h(()=>Pe(E.value.wrapper,y.class));function b(){e.mode!=="hover"||!P.value||(u&&(clearTimeout(u),u=null),P.value.popoverState!==0&&(d=d||setTimeout(()=>{P.value.togglePopover&&P.value.togglePopover(),d=null},e.openDelay)))}function C(){e.mode!=="hover"||!P.value||(d&&(clearTimeout(d),d=null),P.value.popoverState!==1&&(u=u||setTimeout(()=>{P.value.closePopover&&P.value.closePopover(),u=null},e.closeDelay)))}return{attrs:He(y,["class"]),ui:E,popover:c,trigger:o,container:m,containerStyle:$,wrapperClass:O,onMouseOver:b,onMouseLeave:C}}}),Re=["disabled"];function ze(e,y,S,E,t,o){const m=G("HPopoverButton"),c=G("HPopoverPanel"),P=G("HPopover");return _(),ge(P,te({ref:"popover",class:e.wrapperClass},e.attrs,{onMouseleave:e.onMouseLeave}),{default:A(({open:d,close:u})=>[K(m,{ref:"trigger",as:"div",disabled:e.disabled,class:"inline-flex w-full",role:"button",onMouseover:e.onMouseOver},{default:A(()=>[ee(e.$slots,"default",{open:d,close:u},()=>[ye("button",{disabled:e.disabled}," Open ",8,Re)])]),_:2},1032,["disabled","onMouseover"]),d?(_(),Se("div",{key:0,ref:"container",class:oe([e.ui.container,e.ui.width]),style:he(e.containerStyle),onMouseover:y[0]||(y[0]=(...$)=>e.onMouseOver&&e.onMouseOver(...$))},[K($e,te({appear:""},e.ui.transition),{default:A(()=>[K(c,{class:oe([e.ui.base,e.ui.background,e.ui.ring,e.ui.rounded,e.ui.shadow]),static:""},{default:A(()=>[ee(e.$slots,"panel",{open:d,close:u})]),_:2},1032,["class"])]),_:2},1040)],38)):we("",!0)]),_:3},16,["class","onMouseleave"])}const uo=ke(Ke,[["render",ze]]);export{uo as default};
